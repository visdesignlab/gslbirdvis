(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function Te(t,e){}window.plot_map=Le;window.plot_pixels=Re;window.updateData=Te;function Le(t,e){const n=document.getElementById(e),r=t.getContext("2d");t.width=n.offsetWidth,t.height=n.offsetHeight-100;const o=d3.select("body").append("div").style("position","absolute").style("background","white").style("padding","5px 10px").style("border","1px solid black").style("border-radius","5px").style("font-size","14px").style("pointer-events","none").style("opacity",0);Promise.all([d3.json("birds/map_geojsons/us_states.geojson"),d3.json("birds/map_geojsons/states.geojson")]).then(([i,s])=>{const a={type:"FeatureCollection",features:i.features.concat(s.features)},c=d3.geoAlbers().fitSize([t.width,t.height],a),u=d3.geoPath().projection(c);r.clearRect(0,0,t.width,t.height),r.fillStyle="white",r.strokeStyle="black",r.lineWidth=1,a.features.forEach(m=>{const x=u(m);r.beginPath();const y=new Path2D(x);r.fill(y),r.stroke(y)});const l=[-112.2146,40.7],[f,h]=c(l);r.font="30px sans-serif",r.fillStyle="gold",r.textAlign="center",r.textBaseline="middle",r.fillText("★",f,h),t.addEventListener("mousemove",function(m){const x=d3.pointer(m);Math.sqrt(Math.pow(x[0]-f,2)+Math.pow(x[1]-h,2))<15?o.style("opacity",1).html("Great Salt Lake!").style("left",m.pageX+10+"px").style("top",m.pageY-20+"px"):o.style("opacity",0)})}).catch(i=>{console.error("Error loading map background files: ",i)})}function Re(t,e,n,r,o,i,s,a,c,u,l,f){const h=document.getElementById(n);h.style.justifyContent="",d3.select("#great-salt-lake-star").style("visibility","hidden");const m=document.getElementById(r),x=document.getElementById(i),y=document.getElementById(a),d=t.getContext("2d");t.width=h.offsetWidth,t.height=h.offsetHeight-m.offsetHeight-25;let _=null,p=null;function g(){d.fillStyle="white",d.strokeStyle="black",d.lineWidth=1,d.globalAlpha=1,p=d3.geoAlbers().fitSize([t.width,t.height],_);const M=d3.geoPath().projection(p);_&&_.features.forEach($=>{const B=M($);d.beginPath();const R=new Path2D(B);d.fill(R),d.stroke(R)})}Promise.all([d3.json("/birds/map_geojsons/us_states.geojson"),d3.json("/birds/map_geojsons/states.geojson")]).then(([M,$])=>{_={type:"FeatureCollection",features:M.features.concat($.features)},d3.select("#great-salt-lake-star").style("visibility","hidden"),d.clearRect(0,0,t.width,t.height),g()}).catch(M=>{console.error("Error loading map background files: ",M)});const w=document.getElementById(o),E=document.getElementById(s),N=document.getElementById(c),b=document.getElementById(u),A=["January","February","March","April","May","June","July","August","September","October","November","December"],C=d3.select(f);C.select("circle").empty()&&C.append("circle").attr("r",10).attr("cx",15).attr("cy",15).attr("fill","lightgray").attr("stroke","black"),C.select("text").empty()&&C.append("text").attr("x",11).attr("y",19).attr("font-size","14px").attr("font-weight","bold").attr("fill","black").text("?"),d3.select("body").select(".info-tooltip").empty()&&d3.select("body").append("div").attr("class","info-tooltip").style("position","absolute").style("background","white").style("border","1px solid black").style("padding","5px").style("border-radius","3px").style("box-shadow","1px 1px 3px rgba(0,0,0,0.3)").style("font-size","10px").style("max-width","200px").style("display","none").html("<strong>What does this map show?</strong><br>This map visualizes bird observations over the past 20 years, animating each month to reveal the migration and movement dynamics of the chosen species. The animation is powered by observation data from eBird, a global citizen science platform that collects bird sightings from volunteers. <br><br> While the data shows an overall increase in observations over time, this trend is influenced by the growing number of birders contributing to eBird rather than a direct reflection of rising bird populations. As you continue through this story, we’ll explore what’s truly happening between seasons and how climate and habitat changes are shaping these migratory patterns. <br><br> Once the animation concludes, you can update the data to reflect your own curiosity—allowing you to explore different time periods or patterns that stand out to you.");const k=d3.select(".info-tooltip");C.on("mouseover",function(M){k.style("left",`${M.pageX-200}px`).style("top",`${M.pageY-400}px`).style("display","block")}),C.on("mouseout",function(){k.style("display","none")});const I=2004,T=2023;x.min=I,x.max=T,x.value=I,x.disabled=!0,y.min=0,y.max=11,y.step=1,y.value=0,y.disabled=!0;function L(){const M=x.value,$=y.value;w.textContent=`${M}`,E.textContent=A[$]}for(let M=I;M<=T;M++){const $=document.createElement("div");$.style.position="absolute",$.style.left=`calc(${(M-I)/(T-I)*100}% - 0.5px)`,$.style.height="10px",$.style.width="2px",$.style.backgroundColor="black";const B=document.createElement("span");B.textContent=M,B.style.position="absolute",B.style.top="15px",B.style.right="-12px",B.style.fontSize="10px",B.style.color="black",$.appendChild(B),N.appendChild($)}for(let M=0;M<12;M++){const $=document.createElement("div");$.style.position="absolute",$.style.left=`${M/12*100}%`,$.style.height="10px",$.style.width="2px",$.style.backgroundColor="black";const B=document.createElement("span");B.textContent=A[M],B.style.position="absolute",B.style.top="15px",B.style.right="-12px",B.style.fontSize="10px",B.style.color="black",$.appendChild(B),b.appendChild($)}L();function S(M,$){w.textContent=`${M}`,E.textContent=A[$];const B=String($+1).padStart(2,"0"),R=`${M}-${B}`;let O={};Promise.all([d3.json(e[R].MX).then(v=>{O[R]=O[R]||{},O[R].MX=v.features}),d3.json(e[R].UT).then(v=>{O[R]=O[R]||{},O[R].UT=v.features}),d3.json(e[R].AZ).then(v=>{O[R]=O[R]||{},O[R].AZ=v.features})]).then(()=>{const v=O[R]||{},D=v.MX||[],Y=v.UT||[],F=v.AZ||[];d3.select("#great-salt-lake-star").style("visibility","hidden"),d.clearRect(0,0,t.width,t.height),g(),d.globalAlpha=.1,Array.isArray(D)&&D.forEach(P=>{const[W,q]=p(P.geometry.coordinates);d.beginPath(),d.arc(W,q,1.5,0,2*Math.PI),d.fillStyle="blue",d.fill(),d.globalAlpha=.1}),Array.isArray(Y)&&Y.forEach(P=>{const[W,q]=p(P.geometry.coordinates);d.beginPath(),d.arc(W,q,1.5,0,2*Math.PI),d.fillStyle="blue",d.fill(),d.globalAlpha=.1}),Array.isArray(F)&&F.forEach(P=>{const[W,q]=p(P.geometry.coordinates);d.beginPath(),d.arc(W,q,1.5,0,2*Math.PI),d.fillStyle="blue",d.fill(),d.globalAlpha=.1}),d.globalAlpha=.1}).catch(v=>console.error("Error loading JSON data:",v))}z(l),document.getElementById("map_button").addEventListener("click",function(){z(l)});function z(M){clearTimeout(M.timeoutId);let $=I,B=0;const R=35;let O=!1;x.disabled=!0,y.disabled=!0,x.style.opacity=.5,y.style.opacity=.5,M.animationRunning=!0,x.addEventListener("input",()=>{O=!0,L(),S(parseInt(x.value),parseInt(y.value))}),y.addEventListener("input",()=>{O=!0,L(),S(parseInt(x.value),parseInt(y.value))});function v(){O||!M.animationRunning||(S($,B),x.value=$,y.value=B,B+=2,B===12&&(B=0,$++),$<=T?M.timeoutId=setTimeout(v,R):(M.animationRunning=!1,x.disabled=!1,y.disabled=!1,x.style.opacity=1,y.style.opacity=1))}M.timeoutId=setTimeout(v,R)}return{updateData:S,animationState:l}}window.climate_map=ze;function ze(t,e,n){const s=d3.select(t);a(900,900,80,s);async function a(c,u,l,f){const x=(await(await fetch("/birds/climate_data/oni_data.txt")).text()).trim().split(`
`),y=[];x.forEach(v=>{const D=v.trim().split(/\s+/),Y=+D.shift();D.forEach((F,P)=>{y.push({date:new Date(Y,P),value:parseFloat(F)})})});const p=(await(await fetch("/birds/climate_data/sst_data.txt")).text()).trim().split(`
`),g=[];p.forEach(v=>{const D=v.trim().split(/\s+/),Y=parseInt(D[0]),F=parseInt(D[1]),P=parseFloat(D[5]);Y>=2004&&Y<=2024&&F===1&&g.push({date:new Date(Y,0),value:P})});const w=d3.scaleTime().domain(d3.extent(y,v=>v.date)).range([l,c-l]),E=d3.scaleLinear().domain([d3.min(y,v=>v.value),d3.max(y,v=>v.value)]).range([u-l,l]),N=d3.scaleLinear().domain([d3.min(g,v=>v.value),d3.max(g,v=>v.value)]).range([u-l,l]),b=d3.line().x(v=>w(v.date)).y(v=>E(v.value)).curve(d3.curveMonotoneX),A=d3.line().x(v=>w(v.date)).y(v=>N(v.value)).curve(d3.curveMonotoneX),C=d3.area().x(v=>w(v.date)).y0(v=>E(0)).y1(v=>E(v.value)).curve(d3.curveMonotoneX),k=d3.max([...y,...g],v=>Math.abs(v.value)),I=f.append("defs"),T=I.append("linearGradient").attr("id","oniGradient").attr("gradientUnits","userSpaceOnUse").attr("x1","0%").attr("x2","0%").attr("y1",E(k)).attr("y2",E(-k));T.append("stop").attr("offset","0%").attr("stop-color",d3.interpolateReds(1)),T.append("stop").attr("offset","50%").attr("stop-color",d3.interpolateBlues(.1)),T.append("stop").attr("offset","100%").attr("stop-color",d3.interpolateBlues(1)),f.append("path").datum(y).attr("fill","url(#oniGradient)").attr("d",C).on("mousemove",B).on("mouseleave",R).on("click",O),f.append("path").datum(g).attr("fill","none").attr("stroke","orange").attr("stroke-width",4).attr("d",A).style("pointer-events","visibleStroke").on("mousemove",B).on("mouseleave",R).on("click",O),f.append("path").datum(y).attr("fill","none").attr("stroke","black").attr("stroke-width",2).attr("d",b).style("pointer-events","visibleStroke").on("mousemove",B).on("mouseleave",R).on("click",O),f.append("line").attr("x1",l).attr("x2",c-l).attr("y1",E(0)).attr("y2",E(0)).attr("stroke","gray").attr("stroke-width",1).attr("stroke-dasharray","4 2"),f.append("g").attr("transform",`translate(0,${u-l})`).call(d3.axisBottom(w).ticks(10)),f.append("g").attr("transform",`translate(${l},0)`).call(d3.axisLeft(E)),f.append("g").attr("transform",`translate(${c-l},0)`).attr("class","sst-axis").call(d3.axisRight(N)),f.append("text").attr("x",c/2).attr("y",l/2).attr("text-anchor","middle").style("font-size","24px").style("font-weight","bold").text("ONI Index & NINO3 January Temperatures"),f.append("text").attr("x",c/2).attr("y",u-l/3).attr("text-anchor","middle").style("font-size","20px").text("Year"),f.append("text").attr("transform","rotate(-90)").attr("x",-900/2).attr("y",l/3).attr("text-anchor","middle").style("font-size","20px").text("ONI Index"),f.append("text").attr("transform","rotate(-90)").attr("x",-900/2).attr("y",c-l/3).attr("text-anchor","middle").style("font-size","20px").text("Nino3 Temperature Index"),f.append("line").attr("x1",c-l).attr("x2",c-l).attr("y1",l).attr("y2",u-l).attr("stroke","black").attr("stroke-width",1);const L=f.append("g").attr("transform",`translate(${c-l-40}, ${l-60})`).style("cursor","pointer");L.append("circle").attr("r",20).attr("fill","lightgray").attr("stroke","black"),L.append("text").attr("x",-5).attr("y",6).attr("font-size","24px").attr("font-weight","bold").attr("fill","black").text("?");const S=d3.select("body").append("div").style("position","absolute").style("background","white").style("border","1px solid black").style("padding","5px").style("border-radius","3px").style("box-shadow","1px 1px 3px rgba(0,0,0,0.3)").style("font-size","10px").style("max-width","250px").style("display","none").html("<strong>What does this graph show?</strong><br>This graph displays the ONI Index, along with the NINO3 temperature variations over time, taken from January of each year.<br><br> The ONI index is a primary indicator for monitoring El Niño and La Niña. The ONI Index is calculated by averaging the difference between the current sea surface temperature and the long-term average sea surface temperature. <br><br> The Nino3 temperature index measures sea surface temperature anomalies in the eastern Pacific Ocean (where Mexico lies). Understanding the change in sea surface temperature helps further explain the intensity of an El Niño and/or La Niña event. <br><br> This graph syncs with the observation map and updates as you explore different climate events. ");L.on("mouseover",function(v){S.style("left",`${v.pageX+10}px`).style("top",`${v.pageY-25}px`).style("display","block")}),L.on("mouseout",function(){S.style("display","none")});const z=f.append("g").attr("transform",`translate(${l+20}, ${l-20})`);z.append("circle").attr("cx",10).attr("cy",10).attr("r",6).attr("fill","orange"),z.append("text").attr("x",20).attr("y",14).style("font-size","14px").attr("fill","black").text("NINO3 Temperature"),M(f,I);function M(v,D){const q=D.append("linearGradient").attr("id","legendGradient").attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%");q.append("stop").attr("offset","0%").attr("stop-color",d3.interpolateReds(1)),q.append("stop").attr("offset","50%").attr("stop-color",d3.interpolateReds(0)),q.append("stop").attr("offset","100%").attr("stop-color",d3.interpolateBlues(1)),v.append("rect").attr("x",750).attr("y",80).attr("width",20).attr("height",200).style("fill","url(#legendGradient)"),v.append("text").attr("x",750+20/2).attr("y",70).style("font-size","12px").style("text-anchor","middle").text("Strong El Niño"),v.append("text").attr("x",750+20/2).attr("y",300).style("font-size","12px").style("text-anchor","middle").text("Strong La Niña")}const $=d3.select("body").append("div").attr("id","graph-hover-tip").style("position","absolute").style("background","rgba(0, 0, 0, 0.7)").style("color","#fff").style("padding","6px 10px").style("border-radius","4px").style("pointer-events","none").style("font-size","12px").style("display","none").text("Click to select a month");function B(v){const[D,Y]=d3.pointer(v);if(D>=l&&D<=c-l&&Y>=l&&Y<=u-l){const{animationState:F}=window.pelicanUpdateController,P=F.animationRunning?"Wait for animation to finish":"Click to update data";$.text(P).style("left",`${v.pageX+10}px`).style("top",`${v.pageY-20}px`).style("display","block")}else $.style("display","none")}function R(){$.style("display","none")}function O(v){const[D,Y]=d3.pointer(v);if(D<l||D>c-l||Y<l||Y>u-l)return;const F=w.invert(D),P=F.getFullYear(),W=F.getMonth(),{updateData:q,animationState:Ce}=window.pelicanUpdateController;Ce.animationRunning||(document.getElementById(e).value=P,document.getElementById(n).value=W,q(P,W))}}}window.plot_gsl_elevation=Oe;function Oe(t,e,n){const r=d3.select(t);async function o(){const s=(await d3.text("/birds/climate_data/processed_gsl_elevation_data.txt")).trim().split(`
`).map(p=>{const[g,w]=p.split("	").map(E=>+E);return{year:g,value:w}}),a={top:60,right:30,bottom:60,left:80},c=600-a.left-a.right,u=300-a.top-a.bottom,l=d3.scaleLinear().domain(d3.extent(s,p=>p.year)).range([0,c]),f=d3.scaleLinear().domain([d3.min(s,p=>p.value)-1,d3.max(s,p=>p.value)+1]).range([u,0]),h=r.attr("viewBox",`0 0 ${c+a.left+a.right} ${u+a.top+a.bottom}`).append("g").attr("transform",`translate(${a.left},${a.top})`);h.append("g").attr("transform",`translate(0,${u})`).call(d3.axisBottom(l).tickFormat(d3.format("d"))),h.append("text").attr("x",c/2).attr("y",u+45).attr("text-anchor","middle").style("font-size","14px").text("Year"),h.append("g").call(d3.axisLeft(f)),h.append("text").attr("transform","rotate(-90)").attr("x",-180/2).attr("y",-60).attr("text-anchor","middle").style("font-size","14px").text("Elevation (ft)"),h.append("text").attr("x",c/2).attr("y",-30).attr("text-anchor","middle").style("font-size","18px").style("font-weight","bold").text("GSL Elevation Over Time");const m=d3.line().x(p=>l(p.year)).y(p=>f(p.value)).curve(d3.curveMonotoneX);h.append("path").datum(s).attr("fill","none").attr("stroke","steelblue").attr("stroke-width",2).attr("d",m);const x=h.append("circle").attr("r",4).attr("fill","red").style("display","none");r.on("mousemove",function(p){const[g]=d3.pointer(p),w=g-a.left;if(w<0||w>l.range()[1]){x.style("display","none");return}const E=l.invert(w);let N=0;for(;N<s.length-1&&s[N+1].year<E;)N++;const b=s[N],A=s[N+1];if(!b||!A){x.style("display","none");return}const C=(E-b.year)/(A.year-b.year),k=b.value+C*(A.value-b.value),I=l(E),T=f(k);x.attr("cx",I).attr("cy",T).style("display","block")});const y=d3.select("body").append("div").attr("id","graph-hover-tip").style("position","absolute").style("background","rgba(0, 0, 0, 0.7)").style("color","#fff").style("padding","6px 10px").style("border-radius","4px").style("pointer-events","none").style("font-size","12px").style("display","none");h.on("mousemove",function(p){const[g,w]=d3.pointer(p);if(g>=l.range()[0]&&g<=l.range()[1]){const{animationState:E}=window.pelicanUpdateController,N=E.animationRunning?"Wait for animation to finish":"Click to update data";y.text(N).style("left",`${p.pageX+10}px`).style("top",`${p.pageY-20}px`).style("display","block")}else y.style("display","none")}).on("mouseleave",function(){y.style("display","none")}).on("click",function(p){const[g,w]=d3.pointer(p);if(g<l.range()[0]||g>l.range()[1])return;const E=l.invert(g),N=Math.floor(E),b=Math.floor(E%1*12),{updateData:A,animationState:C}=window.pelicanUpdateController;C.animationRunning||(document.getElementById(e).value=N,document.getElementById(n).value=b,A(N,b))});const d=r.append("g").attr("transform",`translate(${c+a.left-10}, ${a.top-30})`).style("cursor","pointer");d.append("circle").attr("r",10).attr("fill","lightgray").attr("stroke","black"),d.append("text").attr("x",-5).attr("y",6).attr("font-size","19px").attr("font-weight","bold").attr("fill","black").text("?");const _=d3.select("body").append("div").style("position","absolute").style("background","white").style("border","1px solid black").style("padding","5px").style("border-radius","3px").style("box-shadow","1px 1px 3px rgba(0,0,0,0.3)").style("font-size","10px").style("max-width","200px").style("display","none").html("<strong>What does this graph show?</strong><br>This graph displays changes in elevation at the Great Salt Lake over time.<br><br> This graph syncs with the observation map and updates as you explore different elevation levels.");d.on("mouseover",function(p){_.style("left",`${p.pageX+10}px`).style("top",`${p.pageY+10}px`).style("display","block")}),d.on("mouseout",function(){_.style("display","none")})}o()}window.plot_gsl_birds=De;window.plot_gsl_comparisons=Pe;window.plot_gsl_comparisons_fixed_years=Ye;async function De(t,e){const o={top:50,right:80,bottom:80,left:80},i=d3.select(t),c=(await(await fetch(e)).json()).features||[],u=new Map;c.forEach(k=>{var M,$;const I=(M=k.properties)==null?void 0:M.observation_date,T=parseInt((($=k.properties)==null?void 0:$.species_reported)||"0",10);if(!I||isNaN(T))return;const L=new Date(I),S=`${L.getFullYear()}-${String(L.getMonth()+1).padStart(2,"0")}`;u.has(S)||u.set(S,{totalSpecies:0,count:0});const z=u.get(S);z.totalSpecies+=T,z.count+=1});const l=Array.from(u.keys()).sort(),f=l.map(k=>{const I=u.get(k);return I.totalSpecies/I.count}),h=d3.max(f)||1,m=f.map(k=>k/h),x=l.map(k=>new Date(k+"-01")),y=new Date("2004-01-01"),d=d3.max(x),_=x.map((k,I)=>({date:k,value:m[I]})).filter(k=>k.date>=y),p=d3.scaleTime().domain([y,d]).range([o.left,900-o.right]),g=d3.scaleLinear().domain([0,1]).range([500-o.bottom,o.top]),w=d3.axisBottom(p).ticks(d3.timeYear.every(1)).tickFormat(d3.timeFormat("%Y-%m")),E=d3.axisBottom(p).ticks(d3.timeMonth.every(1)).tickSize(5).tickFormat(""),N=d3.axisLeft(g).ticks(5),b=30,A=_.map((k,I,T)=>{const L=Math.floor(b/2),S=Math.max(0,I-L),z=Math.min(T.length,I+L+1),M=T.slice(S,z),$=d3.mean(M,B=>B.value);return{date:k.date,value:$}});i.append("path").datum(A).attr("fill","none").attr("stroke","red").attr("stroke-width",2).attr("d",d3.line().x(k=>p(k.date)).y(k=>g(k.value)).curve(d3.curveMonotoneX)),i.append("g").attr("transform",`translate(0, ${500-o.bottom})`).call(E).selectAll("line").style("stroke","light-grey"),i.append("g").attr("transform",`translate(0, ${500-o.bottom})`).call(w).selectAll("text").attr("transform","rotate(-45)").style("text-anchor","end"),i.append("g").attr("transform",`translate(${o.left}, 0)`).call(N);const C=d3.line().x(k=>p(k.date)).y(k=>g(k.value)).curve(d3.curveMonotoneX);i.append("path").datum(_).attr("fill","none").attr("stroke","blue").attr("stroke-width",2).attr("d",C),i.append("text").attr("x",900/2).attr("y",o.top/2).attr("text-anchor","middle").style("font-size","20px").style("font-weight","bold").text("Normalized Species Reported Over Time at the GSL"),i.append("text").attr("x",900/2).attr("y",500-o.bottom/2+30).attr("text-anchor","middle").style("font-size","16px").text("Time (Year-Month)"),i.append("text").attr("transform","rotate(-90)").attr("x",-500/2).attr("y",o.left/3).attr("text-anchor","middle").style("font-size","16px").text("Normalized Species Reported")}async function Ye(t,e,n,r){const s=(await(await fetch(t)).json()).features||[],a=new Map;s.forEach(b=>{var L,S;const A=(L=b.properties)==null?void 0:L.observation_date,C=parseInt(((S=b.properties)==null?void 0:S.species_reported)||"0",10);if(!A||isNaN(C))return;const k=new Date(A),I=`${k.getFullYear()}-${String(k.getMonth()+1).padStart(2,"0")}`;a.has(I)||a.set(I,{totalSpecies:0,count:0});const T=a.get(I);T.totalSpecies+=C,T.count+=1});const c=Array.from(a.keys()).sort(),u=c.map(b=>{const A=a.get(b);return A.totalSpecies/A.count}),l=d3.max(u)||1,f=u.map(b=>b/l),h={};c.forEach((b,A)=>{const C=b.split("-")[0];h[C]||(h[C]=Array(12).fill(0)),h[C][parseInt(b.split("-")[1],10)-1]=f[A]});const m=n,x=r,y=d3.select(e);y.style.display="block",y.selectAll("*").remove();const d=h[m]||Array(12).fill(0),_=h[x]||Array(12).fill(0),p=Math.min(d3.min(d),d3.min(_)),g=Math.max(d3.max(d),d3.max(_)),w=d3.scaleBand().domain(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]).range([50,850]).padding(.1),E=d3.scaleLinear().domain([p,g]).range([550,50]);y.append("g").attr("transform","translate(0,550)").call(d3.axisBottom(w)),y.append("g").attr("transform","translate(50,0)").call(d3.axisLeft(E));const N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];y.append("path").data([d]).attr("fill","none").attr("stroke","blue").attr("stroke-width",2).attr("d",d3.line().x((b,A)=>w(N[A])+w.bandwidth()/2).y(b=>E(b))),y.append("path").data([_]).attr("fill","none").attr("stroke","red").attr("stroke-width",2).attr("d",d3.line().x((b,A)=>w(N[A])+w.bandwidth()/2).y(b=>E(b))),y.append("text").attr("x",820).attr("y",50).attr("fill","blue").text(m),y.append("text").attr("x",820).attr("y",70).attr("fill","red").text(x),y.append("text").attr("x",450).attr("y",590).attr("text-anchor","middle").attr("font-size","14px").text("Month"),y.append("text").attr("x",-250).attr("y",15).attr("text-anchor","middle").attr("font-size","14px").attr("transform","rotate(-90)").text("Normalized Average Species Reported"),y.append("text").attr("x",450).attr("y",30).attr("text-anchor","middle").attr("font-size","20px").attr("font-weight","bold").text(`Bird Species Comparison: ${m} vs ${x}`)}async function Pe(t,e,n,r){const s=(await(await fetch(t)).json()).features||[],a=new Map;s.forEach(y=>{var E,N;const d=(E=y.properties)==null?void 0:E.observation_date,_=parseInt(((N=y.properties)==null?void 0:N.species_reported)||"0",10);if(!d||isNaN(_))return;const p=new Date(d),g=`${p.getFullYear()}-${String(p.getMonth()+1).padStart(2,"0")}`;a.has(g)||a.set(g,{totalSpecies:0,count:0});const w=a.get(g);w.totalSpecies+=_,w.count+=1});const c=Array.from(a.keys()).sort(),u=c.map(y=>{const d=a.get(y);return d.totalSpecies/d.count}),l=d3.max(u)||1,f=u.map(y=>y/l),h={};c.forEach((y,d)=>{const _=y.split("-")[0];h[_]||(h[_]=Array(12).fill(0)),h[_][parseInt(y.split("-")[1],10)-1]=f[d]});function m(y,d,_){const p=d3.select(_);p.style.display="block",p.selectAll("*").remove();const g=h[y]||Array(12).fill(0),w=h[d]||Array(12).fill(0),E=Math.min(d3.min(g),d3.min(w)),N=Math.max(d3.max(g),d3.max(w)),b=d3.scaleBand().domain(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]).range([50,850]).padding(.1),A=d3.scaleLinear().domain([E,N]).range([550,50]),C=p.append("g").attr("transform","translate(0,550)").call(d3.axisBottom(b)),k=p.append("g").attr("transform","translate(50,0)").call(d3.axisLeft(A));C.transition().duration(750).call(d3.axisBottom(b)),k.transition().duration(750).call(d3.axisLeft(A));const I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];p.append("path").data([g]).attr("fill","none").attr("stroke","blue").attr("stroke-width",2).attr("d",d3.line().x((S,z)=>b(I[z])+b.bandwidth()/2).y(S=>A(S))).transition().duration(750).attr("d",d3.line().x((S,z)=>b(I[z])+b.bandwidth()/2).y(S=>A(S))),p.append("path").data([w]).attr("fill","none").attr("stroke","red").attr("stroke-width",2).attr("d",d3.line().x((S,z)=>b(I[z])+b.bandwidth()/2).y(S=>A(S))).transition().duration(750).attr("d",d3.line().x((S,z)=>b(I[z])+b.bandwidth()/2).y(S=>A(S))),p.append("text").attr("x",820).attr("y",50).attr("fill","blue").text(y),p.append("text").attr("x",820).attr("y",70).attr("fill","red").text(d),p.append("text").attr("x",450).attr("y",590).attr("text-anchor","middle").attr("font-size","14px").text("Month"),p.append("text").attr("x",-250).attr("y",15).attr("text-anchor","middle").attr("font-size","14px").attr("transform","rotate(-90)").text("Normalized Average Species Reported"),p.append("text").attr("id","comparison-title").attr("class","main-title").attr("x",450).attr("y",30).attr("text-anchor","middle").attr("font-size","20px").attr("font-weight","bold").text(`Bird Species Comparison: ${y} vs ${d}`)}document.getElementById(e).addEventListener("change",function(){const y=this.value,d=document.getElementById(n).value;m(y,d,r)}),document.getElementById(n).addEventListener("change",function(){const y=document.getElementById(e).value,d=this.value;m(y,d,r)});function x(){document.getElementById(e).value=2004,document.getElementById(n).value=2023}x(),m("2004","2023",r)}var Xe={value:()=>{}};function ae(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new _t(n)}function _t(t){this._=t}function Fe(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}_t.prototype=ae.prototype={constructor:_t,on:function(t,e){var n=this._,r=Fe(t+"",n),o,i=-1,s=r.length;if(arguments.length<2){for(;++i<s;)if((o=(t=r[i]).type)&&(o=Ue(n[o],t.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<s;)if(o=(t=r[i]).type)n[o]=Ht(n[o],t.name,e);else if(e==null)for(o in n)n[o]=Ht(n[o],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new _t(t)},call:function(t,e){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(e,n)}};function Ue(t,e){for(var n=0,r=t.length,o;n<r;++n)if((o=t[n]).name===e)return o.value}function Ht(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=Xe,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Ct="http://www.w3.org/1999/xhtml";const Gt={svg:"http://www.w3.org/2000/svg",xhtml:Ct,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $t(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Gt.hasOwnProperty(e)?{space:Gt[e],local:t}:t}function qe(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ct&&e.documentElement.namespaceURI===Ct?e.createElement(t):e.createElementNS(n,t)}}function He(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function le(t){var e=$t(t);return(e.local?He:qe)(e)}function Ge(){}function Yt(t){return t==null?Ge:function(){return this.querySelector(t)}}function Je(t){typeof t!="function"&&(t=Yt(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i=e[o],s=i.length,a=r[o]=new Array(s),c,u,l=0;l<s;++l)(c=i[l])&&(u=t.call(c,c.__data__,l,i))&&("__data__"in c&&(u.__data__=c.__data__),a[l]=u);return new U(r,this._parents)}function Ve(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function We(){return[]}function ce(t){return t==null?We:function(){return this.querySelectorAll(t)}}function je(t){return function(){return Ve(t.apply(this,arguments))}}function Ze(t){typeof t=="function"?t=je(t):t=ce(t);for(var e=this._groups,n=e.length,r=[],o=[],i=0;i<n;++i)for(var s=e[i],a=s.length,c,u=0;u<a;++u)(c=s[u])&&(r.push(t.call(c,c.__data__,u,s)),o.push(c));return new U(r,o)}function ue(t){return function(){return this.matches(t)}}function de(t){return function(e){return e.matches(t)}}var Ke=Array.prototype.find;function Qe(t){return function(){return Ke.call(this.children,t)}}function tn(){return this.firstElementChild}function en(t){return this.select(t==null?tn:Qe(typeof t=="function"?t:de(t)))}var nn=Array.prototype.filter;function rn(){return Array.from(this.children)}function on(t){return function(){return nn.call(this.children,t)}}function sn(t){return this.selectAll(t==null?rn:on(typeof t=="function"?t:de(t)))}function an(t){typeof t!="function"&&(t=ue(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i=e[o],s=i.length,a=r[o]=[],c,u=0;u<s;++u)(c=i[u])&&t.call(c,c.__data__,u,i)&&a.push(c);return new U(r,this._parents)}function fe(t){return new Array(t.length)}function ln(){return new U(this._enter||this._groups.map(fe),this._parents)}function bt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}bt.prototype={constructor:bt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function cn(t){return function(){return t}}function un(t,e,n,r,o,i){for(var s=0,a,c=e.length,u=i.length;s<u;++s)(a=e[s])?(a.__data__=i[s],r[s]=a):n[s]=new bt(t,i[s]);for(;s<c;++s)(a=e[s])&&(o[s]=a)}function dn(t,e,n,r,o,i,s){var a,c,u=new Map,l=e.length,f=i.length,h=new Array(l),m;for(a=0;a<l;++a)(c=e[a])&&(h[a]=m=s.call(c,c.__data__,a,e)+"",u.has(m)?o[a]=c:u.set(m,c));for(a=0;a<f;++a)m=s.call(t,i[a],a,i)+"",(c=u.get(m))?(r[a]=c,c.__data__=i[a],u.delete(m)):n[a]=new bt(t,i[a]);for(a=0;a<l;++a)(c=e[a])&&u.get(h[a])===c&&(o[a]=c)}function fn(t){return t.__data__}function pn(t,e){if(!arguments.length)return Array.from(this,fn);var n=e?dn:un,r=this._parents,o=this._groups;typeof t!="function"&&(t=cn(t));for(var i=o.length,s=new Array(i),a=new Array(i),c=new Array(i),u=0;u<i;++u){var l=r[u],f=o[u],h=f.length,m=hn(t.call(l,l&&l.__data__,u,r)),x=m.length,y=a[u]=new Array(x),d=s[u]=new Array(x),_=c[u]=new Array(h);n(l,f,y,d,_,m,e);for(var p=0,g=0,w,E;p<x;++p)if(w=y[p]){for(p>=g&&(g=p+1);!(E=d[g])&&++g<x;);w._next=E||null}}return s=new U(s,r),s._enter=a,s._exit=c,s}function hn(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function yn(){return new U(this._exit||this._groups.map(fe),this._parents)}function mn(t,e,n){var r=this.enter(),o=this,i=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(o=e(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function gn(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,o=n.length,i=r.length,s=Math.min(o,i),a=new Array(o),c=0;c<s;++c)for(var u=n[c],l=r[c],f=u.length,h=a[c]=new Array(f),m,x=0;x<f;++x)(m=u[x]||l[x])&&(h[x]=m);for(;c<o;++c)a[c]=n[c];return new U(a,this._parents)}function _n(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],o=r.length-1,i=r[o],s;--o>=0;)(s=r[o])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function xn(t){t||(t=vn);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s=n[i],a=s.length,c=o[i]=new Array(a),u,l=0;l<a;++l)(u=s[l])&&(c[l]=u);c.sort(e)}return new U(o,this._parents).order()}function vn(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function bn(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function wn(){return Array.from(this)}function kn(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null}function En(){let t=0;for(const e of this)++t;return t}function An(){return!this.node()}function In(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o=e[n],i=0,s=o.length,a;i<s;++i)(a=o[i])&&t.call(a,a.__data__,i,o);return this}function $n(t){return function(){this.removeAttribute(t)}}function Mn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Nn(t,e){return function(){this.setAttribute(t,e)}}function Sn(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Bn(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Cn(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Tn(t,e){var n=$t(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Mn:$n:typeof e=="function"?n.local?Cn:Bn:n.local?Sn:Nn)(n,e))}function pe(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ln(t){return function(){this.style.removeProperty(t)}}function Rn(t,e,n){return function(){this.style.setProperty(t,e,n)}}function zn(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function On(t,e,n){return arguments.length>1?this.each((e==null?Ln:typeof e=="function"?zn:Rn)(t,e,n??"")):rt(this.node(),t)}function rt(t,e){return t.style.getPropertyValue(e)||pe(t).getComputedStyle(t,null).getPropertyValue(e)}function Dn(t){return function(){delete this[t]}}function Yn(t,e){return function(){this[t]=e}}function Pn(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Xn(t,e){return arguments.length>1?this.each((e==null?Dn:typeof e=="function"?Pn:Yn)(t,e)):this.node()[t]}function he(t){return t.trim().split(/^|\s+/)}function Pt(t){return t.classList||new ye(t)}function ye(t){this._node=t,this._names=he(t.getAttribute("class")||"")}ye.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function me(t,e){for(var n=Pt(t),r=-1,o=e.length;++r<o;)n.add(e[r])}function ge(t,e){for(var n=Pt(t),r=-1,o=e.length;++r<o;)n.remove(e[r])}function Fn(t){return function(){me(this,t)}}function Un(t){return function(){ge(this,t)}}function qn(t,e){return function(){(e.apply(this,arguments)?me:ge)(this,t)}}function Hn(t,e){var n=he(t+"");if(arguments.length<2){for(var r=Pt(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof e=="function"?qn:e?Fn:Un)(n,e))}function Gn(){this.textContent=""}function Jn(t){return function(){this.textContent=t}}function Vn(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Wn(t){return arguments.length?this.each(t==null?Gn:(typeof t=="function"?Vn:Jn)(t)):this.node().textContent}function jn(){this.innerHTML=""}function Zn(t){return function(){this.innerHTML=t}}function Kn(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Qn(t){return arguments.length?this.each(t==null?jn:(typeof t=="function"?Kn:Zn)(t)):this.node().innerHTML}function tr(){this.nextSibling&&this.parentNode.appendChild(this)}function er(){return this.each(tr)}function nr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function rr(){return this.each(nr)}function or(t){var e=typeof t=="function"?t:le(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ir(){return null}function sr(t,e){var n=typeof t=="function"?t:le(t),r=e==null?ir:typeof e=="function"?e:Yt(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ar(){var t=this.parentNode;t&&t.removeChild(this)}function lr(){return this.each(ar)}function cr(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ur(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function dr(t){return this.select(t?ur:cr)}function fr(t){return arguments.length?this.property("__data__",t):this.node().__data__}function pr(t){return function(e){t.call(this,e,this.__data__)}}function hr(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function yr(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,o=e.length,i;n<o;++n)i=e[n],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++r]=i;++r?e.length=r:delete this.__on}}}function mr(t,e,n){return function(){var r=this.__on,o,i=pr(e);if(r){for(var s=0,a=r.length;s<a;++s)if((o=r[s]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=e;return}}this.addEventListener(t.type,i,n),o={type:t.type,name:t.name,value:e,listener:i,options:n},r?r.push(o):this.__on=[o]}}function gr(t,e,n){var r=hr(t+""),o,i=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,l;c<u;++c)for(o=0,l=a[c];o<i;++o)if((s=r[o]).type===l.type&&s.name===l.name)return l.value}return}for(a=e?mr:yr,o=0;o<i;++o)this.each(a(r[o],e,n));return this}function _e(t,e,n){var r=pe(t),o=r.CustomEvent;typeof o=="function"?o=new o(e,n):(o=r.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function _r(t,e){return function(){return _e(this,t,e)}}function xr(t,e){return function(){return _e(this,t,e.apply(this,arguments))}}function vr(t,e){return this.each((typeof e=="function"?xr:_r)(t,e))}function*br(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],o=0,i=r.length,s;o<i;++o)(s=r[o])&&(yield s)}var wr=[null];function U(t,e){this._groups=t,this._parents=e}function pt(){return new U([[document.documentElement]],wr)}function kr(){return this}U.prototype=pt.prototype={constructor:U,select:Je,selectAll:Ze,selectChild:en,selectChildren:sn,filter:an,data:pn,enter:ln,exit:yn,join:mn,merge:gn,selection:kr,order:_n,sort:xn,call:bn,nodes:wn,node:kn,size:En,empty:An,each:In,attr:Tn,style:On,property:Xn,classed:Hn,text:Wn,html:Qn,raise:er,lower:rr,append:or,insert:sr,remove:lr,clone:dr,datum:fr,on:gr,dispatch:vr,[Symbol.iterator]:br};function Er(t){return new U([[document.querySelector(t)]],[document.documentElement])}function Xt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function xe(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ht(){}var ct=.7,wt=1/ct,nt="\\s*([+-]?\\d+)\\s*",ut="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",J="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ar=/^#([0-9a-f]{3,8})$/,Ir=new RegExp(`^rgb\\(${nt},${nt},${nt}\\)$`),$r=new RegExp(`^rgb\\(${J},${J},${J}\\)$`),Mr=new RegExp(`^rgba\\(${nt},${nt},${nt},${ut}\\)$`),Nr=new RegExp(`^rgba\\(${J},${J},${J},${ut}\\)$`),Sr=new RegExp(`^hsl\\(${ut},${J},${J}\\)$`),Br=new RegExp(`^hsla\\(${ut},${J},${J},${ut}\\)$`),Jt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xt(ht,dt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Vt,formatHex:Vt,formatHex8:Cr,formatHsl:Tr,formatRgb:Wt,toString:Wt});function Vt(){return this.rgb().formatHex()}function Cr(){return this.rgb().formatHex8()}function Tr(){return ve(this).formatHsl()}function Wt(){return this.rgb().formatRgb()}function dt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ar.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?jt(e):n===3?new X(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?yt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?yt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ir.exec(t))?new X(e[1],e[2],e[3],1):(e=$r.exec(t))?new X(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Mr.exec(t))?yt(e[1],e[2],e[3],e[4]):(e=Nr.exec(t))?yt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Sr.exec(t))?Qt(e[1],e[2]/100,e[3]/100,1):(e=Br.exec(t))?Qt(e[1],e[2]/100,e[3]/100,e[4]):Jt.hasOwnProperty(t)?jt(Jt[t]):t==="transparent"?new X(NaN,NaN,NaN,0):null}function jt(t){return new X(t>>16&255,t>>8&255,t&255,1)}function yt(t,e,n,r){return r<=0&&(t=e=n=NaN),new X(t,e,n,r)}function Lr(t){return t instanceof ht||(t=dt(t)),t?(t=t.rgb(),new X(t.r,t.g,t.b,t.opacity)):new X}function Tt(t,e,n,r){return arguments.length===1?Lr(t):new X(t,e,n,r??1)}function X(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Xt(X,Tt,xe(ht,{brighter(t){return t=t==null?wt:Math.pow(wt,t),new X(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ct:Math.pow(ct,t),new X(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new X(tt(this.r),tt(this.g),tt(this.b),kt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zt,formatHex:Zt,formatHex8:Rr,formatRgb:Kt,toString:Kt}));function Zt(){return`#${Q(this.r)}${Q(this.g)}${Q(this.b)}`}function Rr(){return`#${Q(this.r)}${Q(this.g)}${Q(this.b)}${Q((isNaN(this.opacity)?1:this.opacity)*255)}`}function Kt(){const t=kt(this.opacity);return`${t===1?"rgb(":"rgba("}${tt(this.r)}, ${tt(this.g)}, ${tt(this.b)}${t===1?")":`, ${t})`}`}function kt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function tt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Q(t){return t=tt(t),(t<16?"0":"")+t.toString(16)}function Qt(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new H(t,e,n,r)}function ve(t){if(t instanceof H)return new H(t.h,t.s,t.l,t.opacity);if(t instanceof ht||(t=dt(t)),!t)return new H;if(t instanceof H)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),i=Math.max(e,n,r),s=NaN,a=i-o,c=(i+o)/2;return a?(e===i?s=(n-r)/a+(n<r)*6:n===i?s=(r-e)/a+2:s=(e-n)/a+4,a/=c<.5?i+o:2-i-o,s*=60):a=c>0&&c<1?0:s,new H(s,a,c,t.opacity)}function zr(t,e,n,r){return arguments.length===1?ve(t):new H(t,e,n,r??1)}function H(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Xt(H,zr,xe(ht,{brighter(t){return t=t==null?wt:Math.pow(wt,t),new H(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ct:Math.pow(ct,t),new H(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,o=2*n-r;return new X(St(t>=240?t-240:t+120,o,r),St(t,o,r),St(t<120?t+240:t-120,o,r),this.opacity)},clamp(){return new H(te(this.h),mt(this.s),mt(this.l),kt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=kt(this.opacity);return`${t===1?"hsl(":"hsla("}${te(this.h)}, ${mt(this.s)*100}%, ${mt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function te(t){return t=(t||0)%360,t<0?t+360:t}function mt(t){return Math.max(0,Math.min(1,t||0))}function St(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const be=t=>()=>t;function Or(t,e){return function(n){return t+n*e}}function Dr(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Yr(t){return(t=+t)==1?we:function(e,n){return n-e?Dr(e,n,t):be(isNaN(e)?n:e)}}function we(t,e){var n=e-t;return n?Or(t,n):be(isNaN(t)?e:t)}const ee=function t(e){var n=Yr(e);function r(o,i){var s=n((o=Tt(o)).r,(i=Tt(i)).r),a=n(o.g,i.g),c=n(o.b,i.b),u=we(o.opacity,i.opacity);return function(l){return o.r=s(l),o.g=a(l),o.b=c(l),o.opacity=u(l),o+""}}return r.gamma=t,r}(1);function K(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Lt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bt=new RegExp(Lt.source,"g");function Pr(t){return function(){return t}}function Xr(t){return function(e){return t(e)+""}}function Fr(t,e){var n=Lt.lastIndex=Bt.lastIndex=0,r,o,i,s=-1,a=[],c=[];for(t=t+"",e=e+"";(r=Lt.exec(t))&&(o=Bt.exec(e));)(i=o.index)>n&&(i=e.slice(n,i),a[s]?a[s]+=i:a[++s]=i),(r=r[0])===(o=o[0])?a[s]?a[s]+=o:a[++s]=o:(a[++s]=null,c.push({i:s,x:K(r,o)})),n=Bt.lastIndex;return n<e.length&&(i=e.slice(n),a[s]?a[s]+=i:a[++s]=i),a.length<2?c[0]?Xr(c[0].x):Pr(e):(e=c.length,function(u){for(var l=0,f;l<e;++l)a[(f=c[l]).i]=f.x(u);return a.join("")})}var ne=180/Math.PI,Rt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ke(t,e,n,r,o,i){var s,a,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),t*r<e*n&&(t=-t,e=-e,c=-c,s=-s),{translateX:o,translateY:i,rotate:Math.atan2(e,t)*ne,skewX:Math.atan(c)*ne,scaleX:s,scaleY:a}}var gt;function Ur(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Rt:ke(e.a,e.b,e.c,e.d,e.e,e.f)}function qr(t){return t==null||(gt||(gt=document.createElementNS("http://www.w3.org/2000/svg","g")),gt.setAttribute("transform",t),!(t=gt.transform.baseVal.consolidate()))?Rt:(t=t.matrix,ke(t.a,t.b,t.c,t.d,t.e,t.f))}function Ee(t,e,n,r){function o(u){return u.length?u.pop()+" ":""}function i(u,l,f,h,m,x){if(u!==f||l!==h){var y=m.push("translate(",null,e,null,n);x.push({i:y-4,x:K(u,f)},{i:y-2,x:K(l,h)})}else(f||h)&&m.push("translate("+f+e+h+n)}function s(u,l,f,h){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),h.push({i:f.push(o(f)+"rotate(",null,r)-2,x:K(u,l)})):l&&f.push(o(f)+"rotate("+l+r)}function a(u,l,f,h){u!==l?h.push({i:f.push(o(f)+"skewX(",null,r)-2,x:K(u,l)}):l&&f.push(o(f)+"skewX("+l+r)}function c(u,l,f,h,m,x){if(u!==f||l!==h){var y=m.push(o(m)+"scale(",null,",",null,")");x.push({i:y-4,x:K(u,f)},{i:y-2,x:K(l,h)})}else(f!==1||h!==1)&&m.push(o(m)+"scale("+f+","+h+")")}return function(u,l){var f=[],h=[];return u=t(u),l=t(l),i(u.translateX,u.translateY,l.translateX,l.translateY,f,h),s(u.rotate,l.rotate,f,h),a(u.skewX,l.skewX,f,h),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,f,h),u=l=null,function(m){for(var x=-1,y=h.length,d;++x<y;)f[(d=h[x]).i]=d.x(m);return f.join("")}}}var Hr=Ee(Ur,"px, ","px)","deg)"),Gr=Ee(qr,", ",")",")"),ot=0,st=0,it=0,Ae=1e3,Et,at,At=0,et=0,Mt=0,ft=typeof performance=="object"&&performance.now?performance:Date,Ie=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ft(){return et||(Ie(Jr),et=ft.now()+Mt)}function Jr(){et=0}function It(){this._call=this._time=this._next=null}It.prototype=$e.prototype={constructor:It,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Ft():+n)+(e==null?0:+e),!this._next&&at!==this&&(at?at._next=this:Et=this,at=this),this._call=t,this._time=n,zt()},stop:function(){this._call&&(this._call=null,this._time=1/0,zt())}};function $e(t,e,n){var r=new It;return r.restart(t,e,n),r}function Vr(){Ft(),++ot;for(var t=Et,e;t;)(e=et-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ot}function re(){et=(At=ft.now())+Mt,ot=st=0;try{Vr()}finally{ot=0,jr(),et=0}}function Wr(){var t=ft.now(),e=t-At;e>Ae&&(Mt-=e,At=t)}function jr(){for(var t,e=Et,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Et=n);at=t,zt(r)}function zt(t){if(!ot){st&&(st=clearTimeout(st));var e=t-et;e>24?(t<1/0&&(st=setTimeout(re,t-ft.now()-Mt)),it&&(it=clearInterval(it))):(it||(At=ft.now(),it=setInterval(Wr,Ae)),ot=1,Ie(re))}}function oe(t,e,n){var r=new It;return e=e==null?0:+e,r.restart(o=>{r.stop(),t(o+e)},e,n),r}var Zr=ae("start","end","cancel","interrupt"),Kr=[],Me=0,ie=1,Ot=2,xt=3,se=4,Dt=5,vt=6;function Nt(t,e,n,r,o,i){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Qr(t,n,{name:e,index:r,group:o,on:Zr,tween:Kr,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Me})}function Ut(t,e){var n=G(t,e);if(n.state>Me)throw new Error("too late; already scheduled");return n}function V(t,e){var n=G(t,e);if(n.state>xt)throw new Error("too late; already running");return n}function G(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Qr(t,e,n){var r=t.__transition,o;r[e]=n,n.timer=$e(i,0,n.time);function i(u){n.state=ie,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var l,f,h,m;if(n.state!==ie)return c();for(l in r)if(m=r[l],m.name===n.name){if(m.state===xt)return oe(s);m.state===se?(m.state=vt,m.timer.stop(),m.on.call("interrupt",t,t.__data__,m.index,m.group),delete r[l]):+l<e&&(m.state=vt,m.timer.stop(),m.on.call("cancel",t,t.__data__,m.index,m.group),delete r[l])}if(oe(function(){n.state===xt&&(n.state=se,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Ot,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Ot){for(n.state=xt,o=new Array(h=n.tween.length),l=0,f=-1;l<h;++l)(m=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(o[++f]=m);o.length=f+1}}function a(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Dt,1),f=-1,h=o.length;++f<h;)o[f].call(t,l);n.state===Dt&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=vt,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function to(t,e){var n=t.__transition,r,o,i=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){i=!1;continue}o=r.state>Ot&&r.state<Dt,r.state=vt,r.timer.stop(),r.on.call(o?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}i&&delete t.__transition}}function eo(t){return this.each(function(){to(this,t)})}function no(t,e){var n,r;return function(){var o=V(this,t),i=o.tween;if(i!==n){r=n=i;for(var s=0,a=r.length;s<a;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}o.tween=r}}function ro(t,e,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=V(this,t),s=i.tween;if(s!==r){o=(r=s).slice();for(var a={name:e,value:n},c=0,u=o.length;c<u;++c)if(o[c].name===e){o[c]=a;break}c===u&&o.push(a)}i.tween=o}}function oo(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=G(this.node(),n).tween,o=0,i=r.length,s;o<i;++o)if((s=r[o]).name===t)return s.value;return null}return this.each((e==null?no:ro)(n,t,e))}function qt(t,e,n){var r=t._id;return t.each(function(){var o=V(this,r);(o.value||(o.value={}))[e]=n.apply(this,arguments)}),function(o){return G(o,r).value[e]}}function Ne(t,e){var n;return(typeof e=="number"?K:e instanceof dt?ee:(n=dt(e))?(e=n,ee):Fr)(t,e)}function io(t){return function(){this.removeAttribute(t)}}function so(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ao(t,e,n){var r,o=n+"",i;return function(){var s=this.getAttribute(t);return s===o?null:s===r?i:i=e(r=s,n)}}function lo(t,e,n){var r,o=n+"",i;return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===r?i:i=e(r=s,n)}}function co(t,e,n){var r,o,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),c=a+"",s===c?null:s===r&&c===o?i:(o=c,i=e(r=s,a)))}}function uo(t,e,n){var r,o,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),c=a+"",s===c?null:s===r&&c===o?i:(o=c,i=e(r=s,a)))}}function fo(t,e){var n=$t(t),r=n==="transform"?Gr:Ne;return this.attrTween(t,typeof e=="function"?(n.local?uo:co)(n,r,qt(this,"attr."+t,e)):e==null?(n.local?so:io)(n):(n.local?lo:ao)(n,r,e))}function po(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ho(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function yo(t,e){var n,r;function o(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&ho(t,i)),n}return o._value=e,o}function mo(t,e){var n,r;function o(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&po(t,i)),n}return o._value=e,o}function go(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=$t(t);return this.tween(n,(r.local?yo:mo)(r,e))}function _o(t,e){return function(){Ut(this,t).delay=+e.apply(this,arguments)}}function xo(t,e){return e=+e,function(){Ut(this,t).delay=e}}function vo(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?_o:xo)(e,t)):G(this.node(),e).delay}function bo(t,e){return function(){V(this,t).duration=+e.apply(this,arguments)}}function wo(t,e){return e=+e,function(){V(this,t).duration=e}}function ko(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?bo:wo)(e,t)):G(this.node(),e).duration}function Eo(t,e){if(typeof e!="function")throw new Error;return function(){V(this,t).ease=e}}function Ao(t){var e=this._id;return arguments.length?this.each(Eo(e,t)):G(this.node(),e).ease}function Io(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;V(this,t).ease=n}}function $o(t){if(typeof t!="function")throw new Error;return this.each(Io(this._id,t))}function Mo(t){typeof t!="function"&&(t=ue(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i=e[o],s=i.length,a=r[o]=[],c,u=0;u<s;++u)(c=i[u])&&t.call(c,c.__data__,u,i)&&a.push(c);return new Z(r,this._parents,this._name,this._id)}function No(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,o=n.length,i=Math.min(r,o),s=new Array(r),a=0;a<i;++a)for(var c=e[a],u=n[a],l=c.length,f=s[a]=new Array(l),h,m=0;m<l;++m)(h=c[m]||u[m])&&(f[m]=h);for(;a<r;++a)s[a]=e[a];return new Z(s,this._parents,this._name,this._id)}function So(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Bo(t,e,n){var r,o,i=So(e)?Ut:V;return function(){var s=i(this,t),a=s.on;a!==r&&(o=(r=a).copy()).on(e,n),s.on=o}}function Co(t,e){var n=this._id;return arguments.length<2?G(this.node(),n).on.on(t):this.each(Bo(n,t,e))}function To(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Lo(){return this.on("end.remove",To(this._id))}function Ro(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Yt(t));for(var r=this._groups,o=r.length,i=new Array(o),s=0;s<o;++s)for(var a=r[s],c=a.length,u=i[s]=new Array(c),l,f,h=0;h<c;++h)(l=a[h])&&(f=t.call(l,l.__data__,h,a))&&("__data__"in l&&(f.__data__=l.__data__),u[h]=f,Nt(u[h],e,n,h,u,G(l,n)));return new Z(i,this._parents,e,n)}function zo(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ce(t));for(var r=this._groups,o=r.length,i=[],s=[],a=0;a<o;++a)for(var c=r[a],u=c.length,l,f=0;f<u;++f)if(l=c[f]){for(var h=t.call(l,l.__data__,f,c),m,x=G(l,n),y=0,d=h.length;y<d;++y)(m=h[y])&&Nt(m,e,n,y,h,x);i.push(h),s.push(l)}return new Z(i,s,e,n)}var Oo=pt.prototype.constructor;function Do(){return new Oo(this._groups,this._parents)}function Yo(t,e){var n,r,o;return function(){var i=rt(this,t),s=(this.style.removeProperty(t),rt(this,t));return i===s?null:i===n&&s===r?o:o=e(n=i,r=s)}}function Se(t){return function(){this.style.removeProperty(t)}}function Po(t,e,n){var r,o=n+"",i;return function(){var s=rt(this,t);return s===o?null:s===r?i:i=e(r=s,n)}}function Xo(t,e,n){var r,o,i;return function(){var s=rt(this,t),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(t),rt(this,t))),s===c?null:s===r&&c===o?i:(o=c,i=e(r=s,a))}}function Fo(t,e){var n,r,o,i="style."+e,s="end."+i,a;return function(){var c=V(this,t),u=c.on,l=c.value[i]==null?a||(a=Se(e)):void 0;(u!==n||o!==l)&&(r=(n=u).copy()).on(s,o=l),c.on=r}}function Uo(t,e,n){var r=(t+="")=="transform"?Hr:Ne;return e==null?this.styleTween(t,Yo(t,r)).on("end.style."+t,Se(t)):typeof e=="function"?this.styleTween(t,Xo(t,r,qt(this,"style."+t,e))).each(Fo(this._id,t)):this.styleTween(t,Po(t,r,e),n).on("end.style."+t,null)}function qo(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Ho(t,e,n){var r,o;function i(){var s=e.apply(this,arguments);return s!==o&&(r=(o=s)&&qo(t,s,n)),r}return i._value=e,i}function Go(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Ho(t,e,n??""))}function Jo(t){return function(){this.textContent=t}}function Vo(t){return function(){var e=t(this);this.textContent=e??""}}function Wo(t){return this.tween("text",typeof t=="function"?Vo(qt(this,"text",t)):Jo(t==null?"":t+""))}function jo(t){return function(e){this.textContent=t.call(this,e)}}function Zo(t){var e,n;function r(){var o=t.apply(this,arguments);return o!==n&&(e=(n=o)&&jo(o)),e}return r._value=t,r}function Ko(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Zo(t))}function Qo(){for(var t=this._name,e=this._id,n=Be(),r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],a=s.length,c,u=0;u<a;++u)if(c=s[u]){var l=G(c,e);Nt(c,t,n,u,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Z(r,this._parents,t,n)}function ti(){var t,e,n=this,r=n._id,o=n.size();return new Promise(function(i,s){var a={value:s},c={value:function(){--o===0&&i()}};n.each(function(){var u=V(this,r),l=u.on;l!==t&&(e=(t=l).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),u.on=e}),o===0&&i()})}var ei=0;function Z(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Be(){return++ei}var j=pt.prototype;Z.prototype={constructor:Z,select:Ro,selectAll:zo,selectChild:j.selectChild,selectChildren:j.selectChildren,filter:Mo,merge:No,selection:Do,transition:Qo,call:j.call,nodes:j.nodes,node:j.node,size:j.size,empty:j.empty,each:j.each,on:Co,attr:fo,attrTween:go,style:Uo,styleTween:Go,text:Wo,textTween:Ko,remove:Lo,tween:oo,delay:vo,duration:ko,ease:Ao,easeVarying:$o,end:ti,[Symbol.iterator]:j[Symbol.iterator]};function ni(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ri={time:null,delay:0,duration:250,ease:ni};function oi(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function ii(t){var e,n;t instanceof Z?(e=t._id,t=t._name):(e=Be(),(n=ri).time=Ft(),t=t==null?null:t+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],a=s.length,c,u=0;u<a;++u)(c=s[u])&&Nt(c,t,e,u,s,n||oi(c,e));return new Z(r,this._parents,t,e)}pt.prototype.interrupt=eo;pt.prototype.transition=ii;function lt(t,e,n){this.k=t,this.x=e,this.y=n}lt.prototype={constructor:lt,scale:function(t){return t===1?this:new lt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new lt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};lt.prototype;function si(){Er("body").style("background-color","white");const e=document.querySelector(".opening"),n=document.querySelector(".opening_storyline");let r=0;window.addEventListener("wheel",d=>{d.deltaY>0?r=Math.min(r+10,100):r=Math.max(r-10,0),r>=50?(e.style.opacity=0,n.style.transform="translateY(-65vh)",n.style.opacity=1):(e.style.opacity=1,n.style.transform="translateY(0)",n.style.opacity=0)});const o=document.getElementById("home-button");o.addEventListener("click",function(){window.location.reload()}),document.getElementById("about-button").addEventListener("click",function(){document.getElementById("popup").style.display="block",document.getElementById("popup-overlay").style.display="block"}),document.getElementById("close-button").addEventListener("click",function(){document.getElementById("popup").style.display="none",document.getElementById("popup-overlay").style.display="none"}),document.getElementById("grebe-button").addEventListener("click",function(){u("grebe"),o.style.display="block",o.style.opacity=1}),document.getElementById("pelican-button").addEventListener("click",function(){u("pelican"),o.style.display="block",o.style.opacity=1});const i=document.querySelector(".EG_opening"),s=document.querySelector(".grebe-content"),a=document.querySelector(".pelican-content"),c=document.querySelector(".pelican-opening");function u(d){d==="grebe"?(e.style.display="none",n.style.display="none",c.style.display="none",s.style.visibility="visible",s.style.opacity=1):d==="pelican"&&(e.style.display="none",n.style.display="none",i.style.display="none",a.style.opacity=1,a.style.visibility="visible")}const l={};for(let d=2004;d<=2023;d++)for(let _=0;_<12;_++){const p=String(_+1).padStart(2,"0"),g=`${d}-${p}`;l[g]={MX:`/birds/amp_geojsons/monthly_MX_jsons/AMP_MX_${d}-${p}.json`,UT:`/birds/amp_geojsons/monthly_UT_jsons/AMP_UT_${d}-${p}.json`,AZ:`/birds/amp_geojsons/monthly_AZ_jsons/AMP_AZ_${d}-${p}.json`}}const f={};for(let d=2004;d<=2023;d++)for(let _=0;_<12;_++){const p=String(_+1).padStart(2,"0"),g=`${d}-${p}`;f[g]={MX:`/birds/eg_geojsons/monthly_MX_jsons/EG_MX_${d}-${p}.json`,UT:`/birds/eg_geojsons/monthly_UT_jsons/EG_UT_${d}-${p}.json`,AZ:`/birds/eg_geojsons/monthly_AZ_jsons/EG_AZ_${d}-${p}.json`}}const h=document.getElementById("eg-map-canvas"),m=document.getElementById("pelican-map-canvas");function x(d,_){function p(){plot_map(d,_)}p(),new ResizeObserver(()=>{p()}).observe(d)}x(m,"pelican-map"),x(h,"grebe-map");function y(d,_,p,g,w,E,N,b,A,C,k,I){let T;function L(){T=plot_pixels(d,_,p,g,w,E,N,b,A,C,k,I)}return L(),new ResizeObserver(()=>{L()}).observe(d),T}document.getElementById("map_button").addEventListener("click",function(){const d=document.getElementById("pelican-slider"),_=document.getElementById("map_button"),p=document.getElementById("climate_button"),g=document.getElementById("pelican-content2");_.textContent="REPLAY ANIMATION",p.style.display="block",d.style.display="block",g.style.display="block",g.style.transition="opacity 3s ease, transform 1s ease",g.style.opacity=1;let w={animationRunning:!1,timeoutId:null};window.pelicanUpdateController=y(m,l,"pelican-map","pelican-slider","year-label","year-slider","month-label","month-slider","slider-ticks","month-ticks",w,"#info-icon-pelican")}),document.getElementById("visualize-migration").addEventListener("click",function(){const d=document.getElementById("eg-slider"),_=document.getElementById("visualize-migration"),p=document.getElementById("climate_button_eg"),g=document.getElementById("grebe-content4");_.textContent="REPLAY ANIMATION",p.style.display="block",d.style.display="block",g.style.display="block",g.style.transition="opacity 3s ease, transform 1s ease",g.style.opacity=1;let w={animationRunning:!1,timeoutId:null};window.pelicanUpdateController=y(h,f,"grebe-map","eg-slider","eg-year-label","eg-year-slider","eg-month-label","eg-month-slider","eg-slider-ticks","eg-month-ticks",w,"#info-icon-eg")}),document.getElementById("climate_button").addEventListener("click",function(){const d=document.getElementById("pelican_climate_svg"),_=document.getElementById("pelican-content3"),p=document.getElementById("pelican-content4"),g=document.getElementById("gsl_button");d.style.display="block",_.style.display="block",_.style.transition="opacity 3s ease, transform 1s ease",_.style.opacity=1,p.style.display="block",p.style.transition="opacity 3s ease, transform 1s ease",p.style.opacity=1,g.style.display="block",climate_map(d,"year-slider","month-slider")}),document.getElementById("climate_button_eg").addEventListener("click",function(){const d=document.getElementById("eg_climate_svg"),_=document.getElementById("eg-content"),p=document.getElementById("eg-content2"),g=document.getElementById("eg_gsl_button");d.style.display="block",_.style.display="block",_.style.transition="opacity 3s ease, transform 1s ease",_.style.opacity=1,p.style.display="block",p.style.transition="opacity 3s ease, transform 1s ease",p.style.opacity=1,g.style.display="block",climate_map(d,"eg-year-slider","eg-month-slider")}),document.getElementById("gsl_button").addEventListener("click",function(){const d=document.getElementById("gsl-opener");d.style.display="block",d.style.transition="opacity 3s ease, transform 1s ease",d.style.opacity=1;const _=document.getElementById("gsl_elevation_svg");_.style.display="block",plot_gsl_elevation(_,"year-slider","month-slider");const p=document.getElementById("gsl-content1");p.style.display="block",p.style.transition="opacity 3s ease, transform 1s ease",p.style.opacity=1;const g=document.getElementById("gsl_birds_plot_svg");g.style.display="block",plot_gsl_birds(g,"birds/amp_geojsons/filtered_AMP_UT_Year_Avgs.json");const w=document.getElementById("gsl-content2");w.style.display="block",w.style.transition="opacity 3s ease, transform 1s ease",w.style.opacity=1;const E=document.getElementById("comparison_plot_1_svg");E.style.display="block",plot_gsl_comparisons_fixed_years("birds/amp_geojsons/filtered_AMP_UT_Year_Avgs.json","#comparison_plot_1_svg","2009","2011");const N=document.getElementById("comparison_plot1");N.style.display="block",N.style.transition="opacity 3s ease, transform 1s ease",N.style.opacity=1;const b=document.getElementById("comparison_plot_2_svg");b.style.display="block",plot_gsl_comparisons_fixed_years("birds/amp_geojsons/filtered_AMP_UT_Year_Avgs.json","#comparison_plot_2_svg","2010","2011");const A=document.getElementById("comparison_plot2");A.style.display="block",A.style.transition="opacity 3s ease, transform 1s ease",A.style.opacity=1;const C=document.getElementById("comparison_plot_3_svg");C.style.display="block",plot_gsl_comparisons_fixed_years("birds/amp_geojsons/filtered_AMP_UT_Year_Avgs.json","#comparison_plot_3_svg","2015","2023");const k=document.getElementById("comparison_plot3");k.style.display="block",k.style.transition="opacity 3s ease, transform 1s ease",k.style.opacity=1;const I=document.getElementById("gsl_comparison_plots_svg");I.style.display="block",plot_gsl_comparisons("birds/amp_geojsons/filtered_AMP_UT_Year_Avgs.json","year1-dropdown","year2-dropdown","#gsl_comparison_plots_svg");const T=document.getElementById("dropdown-container");T.style.display="block";const L=document.getElementById("story_end");L.style.display="block",L.style.transition="opacity 3s ease, transform 1s ease",L.style.opacity=1;const S=document.getElementById("switch-story-button");S.style.display="block",S.style.opacity=1,S.addEventListener("click",function(){window.location.reload()})}),document.getElementById("eg_gsl_button").addEventListener("click",function(){const d=document.getElementById("eg_gsl_elevation_svg");d.style.display="block",plot_gsl_elevation(d,"eg-year-slider","eg-month-slider");const _=document.getElementById("eg-gsl-content1");_.style.display="block",_.style.transition="opacity 3s ease, transform 1s ease",_.style.opacity=1;const p=document.getElementById("eg_gsl_birds_plot_svg");p.style.display="block",plot_gsl_birds(p,"birds/eg_geojsons/filtered_EG_UT_Year_Avgs.json");const g=document.getElementById("eg-gsl-content2");g.style.display="block",g.style.transition="opacity 3s ease, transform 1s ease",g.style.opacity=1;const w=document.getElementById("eg_comparison_plot_1_svg");w.style.display="block",plot_gsl_comparisons_fixed_years("birds/eg_geojsons/filtered_EG_UT_Year_Avgs.json","#eg_comparison_plot_1_svg","2009","2011");const E=document.getElementById("eg_comparison_plot2");E.style.display="block",E.style.transition="opacity 3s ease, transform 1s ease",E.style.opacity=1;const N=document.getElementById("eg_comparison_plot_2_svg");N.style.display="block",plot_gsl_comparisons_fixed_years("birds/eg_geojsons/filtered_EG_UT_Year_Avgs.json","#eg_comparison_plot_2_svg","2011","2015");const b=document.getElementById("eg_comparison_plot1");b.style.display="block",b.style.transition="opacity 3s ease, transform 1s ease",b.style.opacity=1;const A=document.getElementById("eg_gsl_comparison_plots_svg");A.style.display="block",plot_gsl_comparisons("birds/eg_geojsons/filtered_EG_UT_Year_Avgs.json","eg-year1-dropdown","eg-year2-dropdown","#eg_gsl_comparison_plots_svg");const C=document.getElementById("eg-dropdown-container");C.style.display="block";const k=document.getElementById("eg_story_end");k.style.display="block",k.style.transition="opacity 3s ease, transform 1s ease",k.style.opacity=1;const I=document.getElementById("eg-switch-story-button");I.style.display="block",I.style.opacity=1,I.addEventListener("click",function(){window.location.reload()})})}si();
